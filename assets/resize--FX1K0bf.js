var U={dragStart:!0},ie=(e,s,r)=>Math.min(Math.max(e,s),r),F=e=>typeof e=="string",he=([e,s],r,l)=>{const a=(g,d)=>d===0?0:Math.ceil(g/d)*d;return[a(r,e),a(l,s)]},se=(e,s)=>e.some(r=>s.some(l=>r.contains(l)));function J(e,s){if(e===void 0)return;if(K(e))return e.getBoundingClientRect();if(typeof e=="object"){const{top:l=0,left:a=0,right:g=0,bottom:d=0}=e;return{top:l,right:window.innerWidth-g,bottom:window.innerHeight-d,left:a}}if(e==="parent")return s.parentNode.getBoundingClientRect();const r=document.querySelector(e);if(r===null)throw new Error("The selector provided for bound doesn't exists in the document.");return r.getBoundingClientRect()}var z=(e,s,r)=>e.style.setProperty(s,r),K=e=>e instanceof HTMLElement,pe=(e,s={})=>{let r,l,{bounds:a,axis:g="both",gpuAcceleration:d=!0,legacyTranslate:C=!0,transform:O,applyUserSelectHack:V=!0,disabled:Q=!1,ignoreMultitouch:T=!1,recomputeBounds:x=U,grid:X,position:w,cancel:k,handle:R,defaultClass:N="neodrag",defaultClassDragging:Y="neodrag-dragging",defaultClassDragged:S="neodrag-dragged",defaultPosition:ce={x:0,y:0},onDragStart:de,onDrag:ue,onDragEnd:fe}=s,D=!1,b=0,v=0,E=0,M=0,j=0,q=0,{x:B,y:H}=w?{x:(w==null?void 0:w.x)??0,y:(w==null?void 0:w.y)??0}:ce;W(B,H);let h,y,A,G,Z,ee="",ge=!!w;x={...U,...x};let $=new Set;const P=document.body.style,m=e.classList;function W(t=b,o=v){if(!O){if(C){let c=`${+t}px, ${+o}px`;return z(e,"transform",d?`translate3d(${c}, 0)`:`translate(${c})`)}return z(e,"translate",`${+t}px ${+o}px ${d?"1px":""}`)}const i=O({offsetX:t,offsetY:o,rootNode:e});F(i)&&z(e,"transform",i)}const _=(t,o)=>{const i={offsetX:b,offsetY:v,rootNode:e,currentNode:Z};e.dispatchEvent(new CustomEvent(t,{detail:i})),o==null||o(i)},I=addEventListener;I("pointerdown",re,!1),I("pointerup",ne,!1),I("pointermove",oe,!1),z(e,"touch-action","none");const te=()=>{let t=e.offsetWidth/y.width;return isNaN(t)&&(t=1),t};function re(t){if(Q||t.button===2)return;if($.add(t.pointerId),T&&$.size>1)return t.preventDefault();if(x.dragStart&&(h=J(a,e)),F(R)&&F(k)&&R===k)throw new Error("`handle` selector can't be same as `cancel` selector");if(m.add(N),A=function(n,f){if(!n)return[f];if(K(n))return[n];if(Array.isArray(n))return n;const p=f.querySelectorAll(n);if(p===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(p.values())}(R,e),G=function(n,f){if(!n)return[];if(K(n))return[n];if(Array.isArray(n))return n;const p=f.querySelectorAll(n);if(p===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(p.values())}(k,e),r=/(both|x)/.test(g),l=/(both|y)/.test(g),se(G,A))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const o=t.composedPath()[0];if(!A.some(n=>{var f;return n.contains(o)||((f=n.shadowRoot)==null?void 0:f.contains(o))})||se(G,[o]))return;Z=A.length===1?e:A.find(n=>n.contains(o)),D=!0,y=e.getBoundingClientRect(),V&&(ee=P.userSelect,P.userSelect="none"),_("neodrag:start",de);const{clientX:i,clientY:c}=t,u=te();r&&(E=i-B/u),l&&(M=c-H/u),h&&(j=i-y.left,q=c-y.top)}function ne(t){$.delete(t.pointerId),D&&(x.dragEnd&&(h=J(a,e)),m.remove(Y),m.add(S),V&&(P.userSelect=ee),_("neodrag:end",fe),r&&(E=b),l&&(M=v),D=!1)}function oe(t){if(!D||T&&$.size>1)return;x.drag&&(h=J(a,e)),m.add(Y),t.preventDefault(),y=e.getBoundingClientRect();let o=t.clientX,i=t.clientY;const c=te();if(h){const u={left:h.left+j,top:h.top+q,right:h.right+j-y.width,bottom:h.bottom+q-y.height};o=ie(o,u.left,u.right),i=ie(i,u.top,u.bottom)}if(Array.isArray(X)){let[u,n]=X;if(isNaN(+u)||u<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+n)||n<0)throw new Error("2nd argument of `grid` must be a valid positive number");let f=o-E,p=i-M;[f,p]=he([u/c,n/c],f,p),o=E+f,i=M+p}r&&(b=Math.round((o-E)*c)),l&&(v=Math.round((i-M)*c)),B=b,H=v,_("neodrag",ue),W()}return{destroy:()=>{const t=removeEventListener;t("pointerdown",re,!1),t("pointerup",ne,!1),t("pointermove",oe,!1)},update:t=>{var i,c;g=t.axis||"both",Q=t.disabled??!1,T=t.ignoreMultitouch??!1,R=t.handle,a=t.bounds,x=t.recomputeBounds??U,k=t.cancel,V=t.applyUserSelectHack??!0,X=t.grid,d=t.gpuAcceleration??!0,C=t.legacyTranslate??!0,O=t.transform;const o=m.contains(S);m.remove(N,S),N=t.defaultClass??"neodrag",Y=t.defaultClassDragging??"neodrag-dragging",S=t.defaultClassDragged??"neodrag-dragged",m.add(N),o&&m.add(S),ge&&(B=b=((i=t.position)==null?void 0:i.x)??b,H=v=((c=t.position)==null?void 0:c.y)??v,W())}}};const we="data:image/svg+xml,%3csvg%20width='64px'%20height='64px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20stroke='%23ffffff'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cg%20id='System%20/%20Window'%3e%3cpath%20id='Vector'%20d='M3%206H3.01919M3.01919%206H20.9809M3.01919%206C3%206.31438%203%206.70191%203%207.2002V16.8002C3%2017.9203%203%2018.4796%203.21799%2018.9074C3.40973%2019.2837%203.71547%2019.5905%204.0918%2019.7822C4.51921%2020%205.079%2020%206.19694%2020L17.8031%2020C18.921%2020%2019.48%2020%2019.9074%2019.7822C20.2837%2019.5905%2020.5905%2019.2837%2020.7822%2018.9074C21%2018.48%2021%2017.921%2021%2016.8031L21%207.19691C21%206.70021%2021%206.31368%2020.9809%206M3.01919%206C3.04314%205.60768%203.09697%205.3293%203.21799%205.0918C3.40973%204.71547%203.71547%204.40973%204.0918%204.21799C4.51962%204%205.08009%204%206.2002%204H17.8002C18.9203%204%2019.4796%204%2019.9074%204.21799C20.2837%204.40973%2020.5905%204.71547%2020.7822%205.0918C20.9032%205.3293%2020.957%205.60768%2020.9809%206M20.9809%206H21'%20stroke='%23ffffff'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function me(e,s={}){let{enabled:r=!0,observer:l="singleton"}=s,a=le(l);return r&&a.observe(e),{update(g={}){const d=g.observer??"singleton",C=g.enabled??!0;d!==l&&(a.unobserve(e),a=le(l)),!r&&C?a.observe(e):r&&!C&&a.unobserve(e),r=C,l=d},destroy(){a.disconnect()}}}function ae(e){for(const s of e){const r={observer:L,entry:s};s.target.dispatchEvent(new CustomEvent("resized",{detail:r}))}}let L;function le(e="singleton"){return e==="singleton"?(L||(L=new ResizeObserver(ae)),L):e==="new"?new ResizeObserver(ae):e}export{pe as d,me as r,we as w};
